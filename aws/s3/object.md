# S3 object
S3 내의 모든 존재는 객체로 취급한다.

## Basic terminology
- key : 객체의 이름
- version id : 키와 버전 id를 조합하여 객체를 고유하게 식별 가능
- value : 저장된 콘텐츠. 임의의 바이트 시퀀스로 0TB - 5TB의 크기를 가질 수 있음
- metadata : 객체에 관련된 정보를 담고 있는 key-value 페어
- Subresources : 하위 리소스 메커니즘을 통해 객체 관련 추가 정보를 저장
- Access control information : s3에 저장된 객체에 대한 접근 제어에 관한 정보

s3에 저장된 객체는 기본적으로 비공개이므로, 외부에서 접근하도록 하고 싶다면 공개로 설정하거나 서명된 url을 사용하여야 함

## Object key
## Object metadata
객체를 업로드 후에는 메타데이터를 수정할 수 없다. 수정하려면 복사본을 만들고 수정해야 한다.
### System defined metadata
1. 객체 생성 날짜 등의 정보는 시스템에서 제어하며 s3 만이 수정 가능하다.
2. 객체에 대해 구성된 스토리지 클래스, 서버측 암호화 사용 여부 등의 값은 사용자가 변경할 수 있는 시스템 메타 데이터이다.
http header와 유사한 포맷을 가지고 있음


### User defined metadata
객체를 `PUT`, `POST` 명령어로 생성할 때 http header를 지정하는 방식으로 사용자 정의 메타데이터를 생성할 수 있음. 다른 http header와 혼동되지 않기 위해 `x-amz-meta-` 접두어로 시작해야 함.

## [S3 Storage class](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/storage-class-intro.html)
각 객체는 연결된 스토리지 클래스가 있다.

### 자주 액세스하는 객체를 위한 스토리지 클래스

- S3 Standard : 기본 스토리지 클래스, 객체를 업로드 할 때 스토리지 클래스를 지정하지 않으면 선택됨
- Reduced Redundancy : RRS(Reduced Redundancy Storage) class는 더 적은 중복성으로 저장될 수 있으며 중요하지 않고 재현 가능한 데이터용으로 설계

### 자주 액세스하는 객체와 자주 액세스하지 않는 객체를 자동으로 최적화하는 스토리지 클래스
- S3 Intelligent-Tiering : 스토리지 클래스는 성능 영향 또는 운영 오버헤드 없이 가장 비용 효율적인 스토리지 액세스 계층으로 데이터를 자동으로 이동하여 스토리지 비용을 최적화하도록 설계.

### 자주 액세스하지 않는 객체를 위한 스토리지 클래스
S3 Standard_IA 및 S3 One Zone-IA 스토리지 클래스는 수명이 길고 자주 액세스하지 않는 데이터용으로 설계.

- 백업을 저장하는 경우
자주 액세스되지는 않지만 그래도 밀리초 액세스가 필요한 오래된 데이터의 경우, 

- S3 Standard_IA : 기본 데이터나 다시 생성할 수 없는 데이터의 복사본에만 사용
- S3 One Zone-IA : 가용 영역에 장애 발생 시 데이터를 다시 생성할 수 있는 경우, 그리고 S3 교차 리전 복제(CRR)를 설정하는 경우 객체 복제본에 사용합니다.

### 객체 아카이빙을 위한 스토리지 클래
- S3 Glacier : 분 단위로 데이터의 일부를 검색해야 하는 아카이브에 사용합니다. 최소 스토리지 기간이 90일
- S3 Glacier Deep Archive : 거의 액세스 할 필요가 없는 데이터를 보관할 때 사용. 최소 스토리지 기간은 180일. 가장 저렴한 스토리지이며 48시간 이내에 데이터를 반환


### 객체의 스토리지 클래스 설정
- 새 객체를 생성할 때 스토리지 클래스 지정 가능. `x-amz-storage-class` request header를 추가하여 스토리지 클래스 지정 가능.
- `PUT Object - COPY` API를 사용하여 객체의 복사본을 만들어 이미 저장된 객체의 스토리지 클래스를 변경 가능, Glacier류는 불가
- S3 수명 주기 구성을 추가하여 Amazon S3가 객체의 스토리지 클래스를 변경하도록 지정할 수 있음.
- 복제 구성을 설정할 때 복제된 객체의 스토리지 클래스를 다른 스토리지 클래스로 변경하도록 지정할 수 있음

### 액세스 정책 권한을 특정 스토리지 클래스로 제한
업로드 된 객체를 저장할 때 사용할 스토리지 클래스를 제한 가능.